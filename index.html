<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AI í•œì ì„ ìƒë‹˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background:#f7f7f7; }
    .chat-box { max-height: 60vh; overflow-y: auto; }
    .bubble { white-space: pre-wrap; word-break: break-word; }

    /* âœ… æ‹–åŠ¨æ—¶é˜²æ­¢é€‰ä¸­æ–‡æœ¬ */
    .no-select { user-select: none; }
  </style>
</head>
<body class="p-4">

<button onclick="toggleAI()"
  class="fixed bottom-4 right-4 bg-black text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg">
  ğŸ¤–
</button>

<div id="ai-panel"
  class="hidden fixed bottom-20 right-4 w-[390px] bg-white rounded-xl shadow-xl flex flex-col">

  <!-- âœ… æ‹–åŠ¨æŠŠæ‰‹ï¼šæ ‡é¢˜æ  -->
  <div id="dragHandle" class="bg-black text-white px-4 py-2 rounded-t-xl flex justify-between items-center cursor-move no-select">
    <span id="uiTitle">AI í•œì ì„ ìƒë‹˜</span>
    <button onclick="toggleAI()">âœ–</button>
  </div>

  <!-- âœ… æ§åˆ¶åŒºï¼šsticky æ°¸è¿œå¯è§ -->
  <div id="controlBar" class="px-3 pt-3 pb-2 border-b text-xs space-y-2 sticky top-0 bg-white z-10">
    <div class="flex items-center gap-2">
      <input id="ttsToggle" type="checkbox" checked class="accent-orange-500" />
      <label id="uiTtsLabel">ì½ì–´ì£¼ê¸°(TTS)</label>

      <button id="uiTestVoiceBtn" type="button"
        class="ml-auto px-2 py-1 rounded bg-slate-200">
        ğŸ”Š í…ŒìŠ¤íŠ¸
      </button>
    </div>

    <div class="flex items-center gap-2">
      <span id="uiVoiceLabel" class="w-[72px] text-gray-600">ìŒìƒ‰</span>
      <select id="voiceSelect" class="flex-1 border rounded px-2 py-1 text-xs"></select>
    </div>

    <div class="flex items-center gap-2">
      <span id="uiExplainLabel" class="w-[72px] text-gray-600">ì„¤ëª… ì–¸ì–´</span>
      <select id="explainLang" class="flex-1 border rounded px-2 py-1 text-xs">
        <option value="ko" selected>í•œêµ­ì–´</option>
        <option value="en">English</option>
        <option value="ja">æ—¥æœ¬èª</option>
        <option value="zh">ä¸­æ–‡</option>
      </select>
    </div>

    <div class="flex items-center gap-2">
      <span id="uiReadScopeLabel" class="w-[72px] text-gray-600">ì½ê¸° ë²”ìœ„</span>
      <select id="readScope" class="flex-1 border rounded px-2 py-1 text-xs">
        <option value="zhOnly">ä¸­æ–‡ë§Œ</option>
        <option value="zhPlus">ä¸­æ–‡+ì„¤ëª…</option>
        <option value="all" selected>ì „ì²´</option>
      </select>
    </div>

    <div class="flex items-center gap-2">
      <span id="uiModeLabel" class="w-[72px] text-gray-600">ëª¨ë“œ</span>
      <select id="speakMode" class="flex-1 border rounded px-2 py-1 text-xs">
        <option value="kids" selected>Kids</option>
        <option value="exam">Exam</option>
      </select>
    </div>
  </div>

  <div id="chat" class="chat-box p-3 space-y-2 text-sm"></div>

  <div class="p-3 border-t flex gap-2">
    <input id="input" class="flex-1 border rounded px-2 py-2"
      placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
      onkeydown="if(event.key==='Enter') send();" />
    <button id="uiSendBtn" onclick="send()" class="bg-orange-500 text-white px-4 py-2 rounded">
      ë³´ë‚´ê¸°
    </button>
  </div>

  <div id="uiKeyMode" class="text-xs text-center text-gray-500 pb-2">
    ğŸ” Key ë³´í˜¸ ëª¨ë“œ: Vercel API
  </div>
</div>

<!-- âœ… æŠŠä½ åŸæ¥æ•´æ®µ JS æ”¾åˆ° ui.js -->
<script src="./ui.js"></script>

</body>
</html>
