/* =========================================
   ğŸ“˜ HSK Page Styles (Stable / No Rework)
   åªæ”¾â€œHSKé¡µä¸“å±â€å’Œâ€œç¬”é¡º/æçº¢ä¸“å±â€
   å…¨ç«™é€šç”¨ï¼šæ”¾åœ¨ /styles/base.css
========================================= */

/* ===============================
   ğŸ“± Touch / Selection (å±€éƒ¨)
   åªå½±å“ HSK é¡µé¢åŒºåŸŸï¼Œé¿å…å…¨ç«™å‰¯ä½œç”¨
================================== */
#app, #hskGrid, #learn-panel, #ai-panel {
  -webkit-font-smoothing: antialiased;
}

#app * {
  -webkit-tap-highlight-color: transparent;
}

.no-select {
  user-select: none;
}

/* canvas åœ¨æçº¢/ç¬”é¡ºé‡Œç”¨åˆ° */
#app canvas,
#learn-panel canvas {
  touch-action: none;
}

/* ===============================
   ğŸ§± HSK Grid / Cards (è½»é‡å…œåº•)
   ä¸»è¦ä»ç”± Tailwind æ§åˆ¶
================================== */
#hskGrid {
  /* å¦‚æœæœªæ¥æŸäº›åœ°æ–¹æ²¡åŠ  Tailwind gridï¼Œä¹Ÿèƒ½æœ‰é—´è· */
  gap: 12px;
}

#hskError {
  white-space: pre-wrap;
}

/* ä½  AI é¢æ¿ä¼šç”¨åˆ° */
.chat-box {
  max-height: 60vh;
  overflow-y: auto;
}

.bubble {
  white-space: pre-wrap;
  word-break: break-word;
}

/* ===============================
   âœï¸ Trace Toggle Button (æ—§ç±»åå…¼å®¹)
================================== */
.trace-active,
.trace-btn-on {
  background: #fb923c !important;
  color: #fff !important;
}

/* ===============================
   ğŸ§§ Trace Practice Grid (ç±³å­—æ ¼)
================================== */
.trace-gridbox {
  position: relative;
  width: 100%;
  height: 100%;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
}

/* diagonal dashed lines */
.trace-gridbox::before,
.trace-gridbox::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.22;
}

.trace-gridbox::before {
  background:
    linear-gradient(45deg, transparent 49.6%, #000 49.6%, #000 50.4%, transparent 50.4%),
    linear-gradient(-45deg, transparent 49.6%, #000 49.6%, #000 50.4%, transparent 50.4%);
  -webkit-mask: repeating-linear-gradient(90deg, #000 0 6px, transparent 6px 12px);
          mask: repeating-linear-gradient(90deg, #000 0 6px, transparent 6px 12px);
}

/* cross center lines */
.trace-gridbox::after {
  background:
    linear-gradient(to right, transparent 49.6%, #000 49.6%, #000 50.4%, transparent 50.4%),
    linear-gradient(to bottom, transparent 49.6%, #000 49.6%, #000 50.4%, transparent 50.4%);
  opacity: 0.10;
}

/* watermark character */
.trace-watermark {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(220px, 38vw, 420px);
  font-weight: 800;
  color: rgba(0, 0, 0, 0.16);
  user-select: none;
  pointer-events: none;
  line-height: 1;
}

/* ===============================
   ğŸ§© Stroke Player (SVG ç¬”ç”»æ€)
   å…¼å®¹ strokePlayer.main.js / canvas.js
================================== */

/* æœªå®Œæˆ/åº•è‰² */
.trace-stroke-dim {
  stroke: rgba(0, 0, 0, .18) !important;
  fill: rgba(0, 0, 0, .18) !important;
  opacity: 1 !important;
}

/* å½“å‰ç¬”/æ’­æ”¾é«˜äº® */
.trace-stroke-on {
  stroke: #ff3b30 !important;
  fill: #ff3b30 !important;
  opacity: 1 !important;
}

/* å·²å®Œæˆ */
.trace-stroke-done {
  stroke: #ff3b30 !important;
  fill: #ff3b30 !important;
  opacity: 1 !important;
}

/* ç¬”ç”»åºå·æ•°å­— */
.trace-num {
  font-size: 16px;
  font-weight: 800;
  fill: rgba(0, 0, 0, .35);
}

.trace-num-on {
  fill: #ff3b30 !important;
}

.trace-num-done {
  fill: rgba(255, 59, 48, .85) !important;
}

/* ===============================
   âœ… Optional small polish
================================== */
@media (max-width: 480px) {
  .trace-watermark {
    font-size: clamp(180px, 55vw, 360px);
  }
}
